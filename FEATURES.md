# ğŸš¦ Digital Twin City Simulation - Feature Documentation

> Complete technical documentation of all features, system architecture, and data flow.

---

## ğŸ“‘ Table of Contents

1. [System Architecture Overview](#system-architecture-overview)
2. [Core Components](#core-components)
3. [GNN Traffic Prediction Model](#gnn-traffic-prediction-model)
4. [Frontend Features](#frontend-features)
5. [Backend API](#backend-api)
6. [Data Flow](#data-flow)
7. [City Graph Structure](#city-graph-structure)

---

## ğŸ—ï¸ System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DIGITAL TWIN CITY SIMULATION                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     HTTP/REST      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      PyTorch     â”Œâ”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   Frontend  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   Backend   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ GNN â”‚â”‚
â”‚  â”‚  (Browser)  â”‚                    â”‚   (Flask)   â”‚                   â”‚Modelâ”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”˜â”‚
â”‚        â”‚                                  â”‚                              â”‚   â”‚
â”‚        â”‚ Leaflet.js                       â”‚ NetworkX                     â”‚   â”‚
â”‚        â–¼                                  â–¼                              â–¼   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Interactive â”‚                    â”‚ City Graph  â”‚              â”‚ Trained â”‚â”‚
â”‚  â”‚     Map     â”‚                    â”‚  (.graphml) â”‚              â”‚ Weights â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  (.pt)  â”‚â”‚
â”‚                                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Technology Stack

| Layer | Technology | Purpose |
|-------|------------|---------|
| **Frontend** | HTML5, CSS3, JavaScript | User interface |
| **Visualization** | Leaflet.js | Interactive maps |
| **Backend** | Flask (Python) | REST API server |
| **Graph Processing** | NetworkX | City graph operations |
| **Machine Learning** | PyTorch + PyTorch Geometric | GNN model |
| **GPU Acceleration** | CUDA 12.4 | Fast inference |

---

## ğŸ§© Core Components

### 1. City Graph (`city_graph.graphml`)

The city is modeled as a directed multigraph with:

- **796 Nodes** - Representing intersections, stations, and points of interest
- **4,676+ Edges** - Representing roads and metro connections

#### Node Attributes

| Attribute | Type | Description |
|-----------|------|-------------|
| `id` | String | Unique node identifier |
| `x`, `y` | Float | Graph coordinates |
| `lat`, `lon` | Float | GPS coordinates (Pune, India) |
| `population` | Integer | Population density at node |
| `zone` | String | Urban zone type |
| `amenity` | String | Type of amenity (hospital, park, etc.) |
| `is_metro_station` | Boolean | Whether node is a metro station |

#### Edge Attributes

| Attribute | Type | Description |
|-----------|------|-------------|
| `source`, `target` | String | Connected nodes |
| `base_travel_time` | Float | Normal travel time (minutes) |
| `is_metro` | Boolean | True if metro edge |
| `transport_mode` | String | "road" or "metro" |
| `line_name` | String | Metro line name (if applicable) |
| `line_color` | String | Color code for metro line |

### 2. GNN Model (`gnn_model.py` + `trained_gnn.pt`)

The trained Graph Attention Network that predicts traffic congestion.

### 3. Flask Backend (`backend/app.py`)

REST API serving predictions and graph data.

### 4. Web Frontend (`frontend/`)

Interactive visualization and control interface.

---

## ğŸ¤– GNN Traffic Prediction Model

### Architecture: GATv2 (Graph Attention Network v2)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GATv2 ARCHITECTURE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  INPUT LAYER                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   Node Features    â”‚    â”‚   Edge Features    â”‚                â”‚
â”‚  â”‚ [pop, metro, x, y] â”‚    â”‚ [time, closed, metro]â”‚              â”‚
â”‚  â”‚      (4 dims)      â”‚    â”‚      (3 dims)      â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚            â”‚                         â”‚                            â”‚
â”‚            â–¼                         â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   Node Encoder     â”‚    â”‚   Edge Encoder     â”‚                â”‚
â”‚  â”‚   Linear(4â†’64)     â”‚    â”‚   Linear(3â†’64)     â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚            â”‚                         â”‚                            â”‚
â”‚            â–¼                         â”‚                            â”‚
â”‚  ATTENTION LAYERS (Ã—3)               â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                            â”‚
â”‚  â”‚      GATv2Conv Layer 1         â”‚  â”‚                            â”‚
â”‚  â”‚  â€¢ 4 Attention Heads           â”‚  â”‚                            â”‚
â”‚  â”‚  â€¢ 64 Hidden Dimensions        â”‚  â”‚                            â”‚
â”‚  â”‚  â€¢ Learns neighbor importance  â”‚  â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                            â”‚
â”‚            â–¼                         â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                            â”‚
â”‚  â”‚      GATv2Conv Layer 2         â”‚  â”‚                            â”‚
â”‚  â”‚  â€¢ Propagates congestion info  â”‚  â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                            â”‚
â”‚            â–¼                         â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                            â”‚
â”‚  â”‚      GATv2Conv Layer 3         â”‚  â”‚                            â”‚
â”‚  â”‚  â€¢ Final node embeddings       â”‚  â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                            â”‚
â”‚            â”‚                         â”‚                            â”‚
â”‚            â–¼                         â–¼                            â”‚
â”‚  EDGE PREDICTION HEAD                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Concatenate: [src_embed, tgt_embed, edge] â”‚                  â”‚
â”‚  â”‚              (64 + 64 + 64 = 192 dims)     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚            â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚     MLP: 192 â†’ 64 â†’ 32 â†’ 1                 â”‚                  â”‚
â”‚  â”‚     (Congestion Factor)                     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚            â–¼                                                      â”‚
â”‚  OUTPUT: Congestion Factor (1.0 - 50.0)                          â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Model Parameters

| Parameter | Value | Description |
|-----------|-------|-------------|
| Total Parameters | **115,841** | Highly efficient |
| Input Node Features | 4 | population, is_metro, x, y |
| Input Edge Features | 3 | base_time, is_closed, is_metro |
| Hidden Dimensions | 64 | Embedding size |
| Attention Heads | 4 | Multi-head attention |
| GATv2 Layers | 3 | Message passing layers |
| Dropout | 0.2 | Regularization |

### Why GATv2 Works for Traffic

1. **Attention Mechanism**: Learns which neighboring roads matter most for congestion propagation
2. **Inductive Learning**: Shares weights across all nodes - learns physics, not map memorization
3. **Edge-Level Predictions**: Directly predicts congestion per road segment
4. **Graph Sparsity**: Only processes actual roads (672 edges), ignoring empty space

### Training Details

| Metric | Value |
|--------|-------|
| Training Samples | 6,000 traffic snapshots |
| Epochs | 50 |
| Training Time | 23.1 minutes (RTX 3050) |
| Validation Loss | 61.73 MSE |
| Optimizer | Adam (lr=0.001) |

---

## ğŸ¨ Frontend Features

### 1. ğŸŒ“ Dark/Light Theme Toggle

**Location**: Header (moon/sun icon button)

**How It Works**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    THEME TOGGLE FLOW                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  User Clicks Toggle                                               â”‚
â”‚         â”‚                                                         â”‚
â”‚         â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚ Check Current   â”‚                                             â”‚
â”‚  â”‚    Theme        â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚           â”‚                                                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                                â”‚
â”‚     â–¼           â–¼                                                â”‚
â”‚  [Dark]      [Light]                                             â”‚
â”‚     â”‚           â”‚                                                â”‚
â”‚     â–¼           â–¼                                                â”‚
â”‚  Switch to   Switch to                                           â”‚
â”‚   Light       Dark                                               â”‚
â”‚     â”‚           â”‚                                                â”‚
â”‚     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚           â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚ 1. Update data-theme attribute      â”‚                         â”‚
â”‚  â”‚ 2. Save to localStorage             â”‚                         â”‚
â”‚  â”‚ 3. Swap map tiles (CARTO dark/light)â”‚                         â”‚
â”‚  â”‚ 4. CSS variables auto-update colors â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CSS Variables Changed**:

| Variable | Dark Theme | Light Theme |
|----------|------------|-------------|
| `--bg-primary` | `#0a0e14` | `#f5f7fa` |
| `--bg-secondary` | `#141b24` | `#ffffff` |
| `--text-primary` | `#ecf0f1` | `#2c3e50` |
| `--border-color` | `rgba(255,255,255,0.1)` | `rgba(0,0,0,0.1)` |

---

### 2. ğŸ” Search Bar

**Location**: Header (search input field)

**How It Works**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SEARCH FLOW                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  User Types Query (e.g., "hospital")                             â”‚
â”‚         â”‚                                                         â”‚
â”‚         â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚ Debounce 300ms  â”‚  (Prevents excessive searches)              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚           â”‚                                                       â”‚
â”‚           â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚            LOCAL SEARCH (Client-Side)                â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  For each node in state.graphData.nodes:             â”‚         â”‚
â”‚  â”‚    â”œâ”€â”€ Match node ID?        â†’ Priority 3 (exact)    â”‚         â”‚
â”‚  â”‚    â”œâ”€â”€ Match amenity type?   â†’ Priority 2            â”‚         â”‚
â”‚  â”‚    â””â”€â”€ Match zone name?      â†’ Priority 1            â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  Sort by priority, limit to 10 results               â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â”‚                                          â”‚
â”‚                        â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚              DISPLAY RESULTS                         â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚         â”‚
â”‚  â”‚  â”‚ ğŸ¥  Node 45                                  â”‚     â”‚         â”‚
â”‚  â”‚  â”‚     hospital â€¢ downtown â€¢ Pop: 8,500        â”‚     â”‚         â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚         â”‚
â”‚  â”‚  â”‚ ğŸ¥  Node 123                                 â”‚     â”‚         â”‚
â”‚  â”‚  â”‚     hospital â€¢ residential â€¢ Pop: 5,200     â”‚     â”‚         â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â”‚                                          â”‚
â”‚                        â–¼                                          â”‚
â”‚  User Clicks Result                                               â”‚
â”‚         â”‚                                                         â”‚
â”‚         â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  1. Map zooms to node location (zoom level 16)      â”‚         â”‚
â”‚  â”‚  2. Pulse animation highlights the node             â”‚         â”‚
â”‚  â”‚  3. Info panel shows node details                   â”‚         â”‚
â”‚  â”‚  4. Search results close                            â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Searchable Fields**:
- Node ID (e.g., "45", "123")
- Amenity type (e.g., "hospital", "park", "metro_station")
- Zone name (e.g., "downtown", "residential", "industrial")

---

### 3. ğŸ—ºï¸ Route Planner

**Location**: Sidebar panel "Route Planner"

**How It Works**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ROUTE PLANNER FLOW                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  User Enters:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚  ğŸŸ¢ Source Node:  [    45    ]       â”‚                        â”‚
â”‚  â”‚  ğŸ”´ Target Node:  [   200    ]       â”‚                        â”‚
â”‚  â”‚        [ Find Route ]                 â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚         â”‚                                                         â”‚
â”‚         â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚            API REQUEST                               â”‚         â”‚
â”‚  â”‚  POST /api/shortest-path                            â”‚         â”‚
â”‚  â”‚  Body: { source: "45", target: "200" }              â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â”‚                                          â”‚
â”‚                        â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚            BACKEND PROCESSING                        â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  NetworkX Dijkstra's Algorithm:                      â”‚         â”‚
â”‚  â”‚  nx.shortest_path(graph, source, target,             â”‚         â”‚
â”‚  â”‚                   weight='base_travel_time')         â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  Returns: path[], length, hops                       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â”‚                                          â”‚
â”‚                        â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚            VISUALIZATION                             â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  1. Create route layer group                         â”‚         â”‚
â”‚  â”‚  2. Convert path nodes to lat/lng coordinates        â”‚         â”‚
â”‚  â”‚  3. Draw glow line (thick, semi-transparent)         â”‚         â”‚
â”‚  â”‚  4. Draw route line (dashed green)                   â”‚         â”‚
â”‚  â”‚  5. Add start marker (ğŸŸ¢)                            â”‚         â”‚
â”‚  â”‚  6. Add end marker (ğŸ”´)                              â”‚         â”‚
â”‚  â”‚  7. Fit map bounds to show entire route              â”‚         â”‚
â”‚  â”‚  8. Display route info panel                         â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚         â”‚
â”‚  â”‚  â”‚  Distance:    15.7 units            â”‚             â”‚         â”‚
â”‚  â”‚  â”‚  Travel Time: 31.4 min              â”‚             â”‚         â”‚
â”‚  â”‚  â”‚  Hops:        12 nodes              â”‚             â”‚         â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Route Visualization Styles**:

| Element | Style |
|---------|-------|
| Glow Line | Color: `#00ffaa`, Weight: 10, Opacity: 0.3 |
| Route Line | Color: `#00ff88`, Weight: 5, Dashed: `10,5` |
| Start Marker | ğŸŸ¢ emoji with bounce animation |
| End Marker | ğŸ”´ emoji with bounce animation |

---

### 4. â° Time Simulation Slider

**Location**: Sidebar panel "Time Simulation"

**How It Works**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TIME SIMULATION FLOW                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    TIME SLIDER UI                            â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚   Current Time: 09:00 AM          Period: ğŸš— Morning Rush    â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚ â”‚
â”‚  â”‚   12AM      6AM      12PM      6PM      11PM                 â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚   Quick Buttons:                                              â”‚ â”‚
â”‚  â”‚   [ğŸŒ… 7AM] [ğŸš— 9AM] [â˜€ï¸ 1PM] [ğŸŒ† 6PM] [ğŸŒ™ 10PM]              â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                                         â”‚
â”‚         â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              TIME-BASED MULTIPLIERS                          â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  Hour    Multiplier    Period                                â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚ â”‚
â”‚  â”‚  0-4     0.2-0.3x      ğŸŒ™ Night (very low)                   â”‚ â”‚
â”‚  â”‚  5-6     0.5-0.7x      ğŸŒ… Early Morning                      â”‚ â”‚
â”‚  â”‚  7-9     0.9-1.5x      ğŸš— Morning Rush (peak at 9AM)         â”‚ â”‚
â”‚  â”‚  10-15   0.9-1.1x      â˜€ï¸ Daytime (normal)                   â”‚ â”‚
â”‚  â”‚  16-19   1.0-1.5x      ğŸŒ† Evening Rush (peak at 6PM)         â”‚ â”‚
â”‚  â”‚  20-23   0.4-1.0x      ğŸŒ™ Night (decreasing)                 â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                                         â”‚
â”‚         â–¼                                                         â”‚
â”‚  When "Run Prediction" clicked:                                   â”‚
â”‚         â”‚                                                         â”‚
â”‚         â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              PREDICTION WITH TIME                            â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  1. GNN predicts base congestion factors                     â”‚ â”‚
â”‚  â”‚  2. Multiply by time multiplier:                             â”‚ â”‚
â”‚  â”‚     adjusted_congestion = base_congestion Ã— multiplier       â”‚ â”‚
â”‚  â”‚  3. Update visualization with adjusted values                â”‚ â”‚
â”‚  â”‚  4. Show toast: "Prediction at 9AM: ..."                     â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Time Period Classifications**:

| Hours | Period | Multiplier Range | Visual Indicator |
|-------|--------|------------------|------------------|
| 6-10 | Morning Rush | 0.7x - 1.5x | ğŸš— Red badge |
| 10-16 | Daytime | 0.9x - 1.1x | â˜€ï¸ Yellow badge |
| 16-20 | Evening Rush | 1.0x - 1.5x | ğŸš— Red badge |
| 20-6 | Night | 0.2x - 0.8x | ğŸŒ™ Blue badge |

---

### 5. ğŸš¦ Road Closure Testing

**Location**: Sidebar panel "Road Closure Test"

**How It Works**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ROAD CLOSURE FLOW                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  User Clicks on Road Edge (on map)                               â”‚
â”‚         â”‚                                                         â”‚
â”‚         â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Toggle Road State                                   â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  If OPEN:                                            â”‚         â”‚
â”‚  â”‚    1. Add to closedRoads Set                         â”‚         â”‚
â”‚  â”‚    2. Change color to pink (#ff69b4)                 â”‚         â”‚
â”‚  â”‚    3. Add dashed line style                          â”‚         â”‚
â”‚  â”‚    4. Add to closed roads list UI                    â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  If CLOSED:                                          â”‚         â”‚
â”‚  â”‚    1. Remove from closedRoads Set                    â”‚         â”‚
â”‚  â”‚    2. Restore normal blue color                      â”‚         â”‚
â”‚  â”‚    3. Remove dashed style                            â”‚         â”‚
â”‚  â”‚    4. Remove from closed roads list UI               â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â”‚                                          â”‚
â”‚                        â–¼                                          â”‚
â”‚  User Clicks "Run Prediction"                                     â”‚
â”‚         â”‚                                                         â”‚
â”‚         â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  API Request with Closed Roads                       â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  POST /api/predict                                   â”‚         â”‚
â”‚  â”‚  Body: {                                             â”‚         â”‚
â”‚  â”‚    closed_roads: ["45-46", "100-101"],               â”‚         â”‚
â”‚  â”‚    hour: 9                                           â”‚         â”‚
â”‚  â”‚  }                                                   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â”‚                                          â”‚
â”‚                        â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  GNN Prediction with Closures                        â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  Edge features include:                              â”‚         â”‚
â”‚  â”‚  â€¢ is_closed = 1.0 for blocked roads                 â”‚         â”‚
â”‚  â”‚  â€¢ is_closed = 0.0 for open roads                    â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  Model predicts congestion propagation:              â”‚         â”‚
â”‚  â”‚  â€¢ Closed road gets HIGH congestion                  â”‚         â”‚
â”‚  â”‚  â€¢ Nearby roads see INCREASED congestion             â”‚         â”‚
â”‚  â”‚  â€¢ Alternative routes may see HIGHER traffic         â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â”‚                                          â”‚
â”‚                        â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Visualization Update                                â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â”‚  Color coding by congestion percentile:              â”‚         â”‚
â”‚  â”‚  â€¢ 80-100%: Dark Red   (#c0392b)                     â”‚         â”‚
â”‚  â”‚  â€¢ 60-80%:  Orange     (#e67e22)                     â”‚         â”‚
â”‚  â”‚  â€¢ 40-60%:  Yellow     (#f1c40f)                     â”‚         â”‚
â”‚  â”‚  â€¢ 20-40%:  Light Green(#2ecc71)                     â”‚         â”‚
â”‚  â”‚  â€¢ 0-20%:   Dark Green (#1e8449)                     â”‚         â”‚
â”‚  â”‚  â€¢ Blocked: Pink Dashed(#ff69b4)                     â”‚         â”‚
â”‚  â”‚                                                       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 6. ğŸ—ºï¸ Map Visualization Layers

**Location**: Sidebar "Controls" panel

**Available Layers**:

| Layer | Toggle | Description |
|-------|--------|-------------|
| **Roads** | â˜‘ï¸ | Blue lines for all road edges |
| **Metro Lines** | â˜‘ï¸ | Colored lines (Red/Blue/Green) for metro |
| **Nodes** | â˜‘ï¸ | Circle markers for intersections |
| **Amenities** | â˜‘ï¸ | Emoji markers for points of interest |

**Amenity Emoji Mapping**:

| Amenity | Emoji | Color Theme |
|---------|-------|-------------|
| Hospital | ğŸ¥ | Red |
| Park | ğŸŒ³ | Green |
| School | ğŸ« | Orange |
| Metro Station | ğŸš‡ | Purple |
| Mall | ğŸ›’ | Pink |
| Factory | ğŸ­ | Brown |
| Warehouse | ğŸ“¦ | Gray |
| Office | ğŸ¢ | Blue |

---

## ğŸ”Œ Backend API

### API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/` | Serve frontend |
| GET | `/api/status` | System status |
| GET | `/api/graph` | Get full graph data |
| GET | `/api/metro-lines` | Get metro line data |
| GET | `/api/zones` | Get zone statistics |
| GET | `/api/amenities` | Get amenity locations |
| GET | `/api/search?q=query` | Search nodes |
| POST | `/api/predict` | Run traffic prediction |
| POST | `/api/shortest-path` | Find route between nodes |

### API Response Examples

#### GET `/api/status`

```json
{
  "status": "online",
  "model_loaded": true,
  "graph_loaded": true,
  "device": "cuda",
  "nodes": 796,
  "edges": 4676
}
```

#### POST `/api/predict`

**Request**:
```json
{
  "closed_roads": ["45-46", "100-101"],
  "hour": 9
}
```

**Response**:
```json
{
  "predictions": [
    {
      "source": "0",
      "target": "1",
      "is_metro": false,
      "is_closed": false,
      "congestion": 12.45
    }
  ],
  "stats": {
    "mean_congestion": 8.32,
    "max_congestion": 45.67,
    "road_mean": 9.12,
    "metro_mean": 2.34,
    "closed_roads": 2
  }
}
```

#### POST `/api/shortest-path`

**Request**:
```json
{
  "source": "45",
  "target": "200"
}
```

**Response**:
```json
{
  "path": ["45", "46", "78", "150", "200"],
  "length": 15.7,
  "hops": 4
}
```

---

## ğŸ”„ Data Flow

### Complete Request-Response Cycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COMPLETE DATA FLOW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                                                           â”‚
â”‚  â•‘   FRONTEND    â•‘                                                           â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•                                                           â”‚
â”‚          â”‚                                                                    â”‚
â”‚          â”‚ 1. Page Load                                                       â”‚
â”‚          â–¼                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚  â”‚ init()            â”‚                                                       â”‚
â”‚  â”‚ â€¢ Initialize map  â”‚                                                       â”‚
â”‚  â”‚ â€¢ Setup listeners â”‚                                                       â”‚
â”‚  â”‚ â€¢ Load theme      â”‚                                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚            â”‚                                                                  â”‚
â”‚            â”‚ 2. Fetch Status                                                  â”‚
â”‚            â–¼                                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—        GET /api/status         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  checkStatus()    â•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â•‘    Flask API      â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚            â”‚                  { status, device }                              â”‚
â”‚            â”‚                                                                  â”‚
â”‚            â”‚ 3. Load Graph                                                    â”‚
â”‚            â–¼                                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—        GET /api/graph          â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  loadGraphData()  â•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â•‘  NetworkX Graph   â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚            â”‚              { nodes[], edges[] }                                â”‚
â”‚            â”‚                                                                  â”‚
â”‚            â”‚ 4. Render Graph                                                  â”‚
â”‚            â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚  â”‚ renderGraph()     â”‚                                                       â”‚
â”‚  â”‚ â€¢ Build nodeMap   â”‚                                                       â”‚
â”‚  â”‚ â€¢ Create layers   â”‚                                                       â”‚
â”‚  â”‚ â€¢ Draw edges      â”‚                                                       â”‚
â”‚  â”‚ â€¢ Draw nodes      â”‚                                                       â”‚
â”‚  â”‚ â€¢ Add to Leaflet  â”‚                                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚            â”‚                                                                  â”‚
â”‚            â”‚ 5. User Interaction (Close roads, Change time)                   â”‚
â”‚            â–¼                                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                                                       â”‚
â”‚  â•‘ runPrediction()   â•‘                                                       â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•                                                       â”‚
â”‚            â”‚                                                                  â”‚
â”‚            â”‚ 6. Request Prediction                                            â”‚
â”‚            â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  POST /api/predict                                                    â”‚    â”‚
â”‚  â”‚  Body: { closed_roads: [...], hour: 9 }                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚                                         â”‚
â”‚                                     â–¼                                         â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚
â”‚  â•‘                          BACKEND PROCESSING                          â•‘    â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£    â”‚
â”‚  â•‘                                                                       â•‘    â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘    â”‚
â”‚  â•‘  â”‚ 7. Build Feature Tensors                                        â”‚ â•‘    â”‚
â”‚  â•‘  â”‚                                                                  â”‚ â•‘    â”‚
â”‚  â•‘  â”‚ Node Features: [num_nodes, 4]                                   â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   â€¢ population / 10000 (normalized)                             â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   â€¢ is_metro_station (0 or 1)                                   â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   â€¢ x coordinate                                                â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   â€¢ y coordinate                                                â”‚ â•‘    â”‚
â”‚  â•‘  â”‚                                                                  â”‚ â•‘    â”‚
â”‚  â•‘  â”‚ Edge Features: [num_edges, 3]                                   â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   â€¢ base_travel_time                                            â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   â€¢ is_closed (1.0 if in closed_roads)                          â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   â€¢ is_metro (1.0 if metro edge)                                â”‚ â•‘    â”‚
â”‚  â•‘  â”‚                                                                  â”‚ â•‘    â”‚
â”‚  â•‘  â”‚ Edge Index: [2, num_edges] (source, target pairs)               â”‚ â•‘    â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘    â”‚
â”‚  â•‘                                     â”‚                                 â•‘    â”‚
â”‚  â•‘                                     â–¼                                 â•‘    â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘    â”‚
â”‚  â•‘  â”‚ 8. GNN Forward Pass                                             â”‚ â•‘    â”‚
â”‚  â•‘  â”‚                                                                  â”‚ â•‘    â”‚
â”‚  â•‘  â”‚ with torch.no_grad():                                           â”‚ â•‘    â”‚
â”‚  â•‘  â”‚     predictions = model(x, edge_index, edge_attr)               â”‚ â•‘    â”‚
â”‚  â•‘  â”‚                                                                  â”‚ â•‘    â”‚
â”‚  â•‘  â”‚ Model executes:                                                 â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   1. node_encoder(x)        â†’ Node embeddings                   â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   2. edge_encoder(edge_attr)â†’ Edge embeddings                   â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   3. GATv2Conv Ã—3           â†’ Message passing                   â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   4. edge_predictor(...)    â†’ Congestion per edge               â”‚ â•‘    â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘    â”‚
â”‚  â•‘                                     â”‚                                 â•‘    â”‚
â”‚  â•‘                                     â–¼                                 â•‘    â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘    â”‚
â”‚  â•‘  â”‚ 9. Build Response                                               â”‚ â•‘    â”‚
â”‚  â•‘  â”‚                                                                  â”‚ â•‘    â”‚
â”‚  â•‘  â”‚ For each edge:                                                  â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   { source, target, is_metro, is_closed, congestion }          â”‚ â•‘    â”‚
â”‚  â•‘  â”‚                                                                  â”‚ â•‘    â”‚
â”‚  â•‘  â”‚ Statistics:                                                     â”‚ â•‘    â”‚
â”‚  â•‘  â”‚   { mean, max, min, road_mean, metro_mean }                     â”‚ â•‘    â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘    â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                        â”‚                                      â”‚
â”‚                                        â”‚ 10. JSON Response                    â”‚
â”‚                                        â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  { predictions: [...], stats: {...} }                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚                                         â”‚
â”‚                                     â–¼                                         â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—   â”‚
â”‚  â•‘                      FRONTEND VISUALIZATION                           â•‘   â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£   â”‚
â”‚  â•‘                                                                        â•‘   â”‚
â”‚  â•‘  11. Apply Time Multiplier (client-side)                              â•‘   â”‚
â”‚  â•‘      congestion = congestion Ã— TIME_MULTIPLIERS[hour]                 â•‘   â”‚
â”‚  â•‘                                                                        â•‘   â”‚
â”‚  â•‘  12. updatePredictionVisualization()                                  â•‘   â”‚
â”‚  â•‘      â€¢ Calculate percentiles (p20, p40, p60, p80)                     â•‘   â”‚
â”‚  â•‘      â€¢ For each edge:                                                 â•‘   â”‚
â”‚  â•‘        - Get congestion value                                         â•‘   â”‚
â”‚  â•‘        - Determine color based on percentile                          â•‘   â”‚
â”‚  â•‘        - Update polyline style                                        â•‘   â”‚
â”‚  â•‘                                                                        â•‘   â”‚
â”‚  â•‘  13. updateStatsUI()                                                  â•‘   â”‚
â”‚  â•‘      â€¢ Display mean, max, road_mean, metro_mean                       â•‘   â”‚
â”‚  â•‘                                                                        â•‘   â”‚
â”‚  â•‘  14. showToast()                                                      â•‘   â”‚
â”‚  â•‘      â€¢ "Prediction at 9AM: Impact of 2 blocked road(s)"              â•‘   â”‚
â”‚  â•‘                                                                        â•‘   â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ™ï¸ City Graph Structure

### Zone Distribution

The city is divided into distinct zones with different characteristics:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CITY ZONE LAYOUT                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                    â”‚   INDUSTRIAL    â”‚                           â”‚
â”‚                    â”‚    ğŸ­ ğŸ“¦        â”‚                           â”‚
â”‚                    â”‚  Low pop, high  â”‚                           â”‚
â”‚                    â”‚   traffic AM/PM â”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                             â”‚                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚                        â”‚                         â”‚           â”‚
â”‚    â–¼                        â–¼                         â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ SUBURBS  â”‚        â”‚  DOWNTOWN   â”‚         â”‚RESIDENTIALâ”‚        â”‚
â”‚  â”‚  ğŸ˜ï¸      â”‚â—„â”€â”€â”€â”€â”€â”€â–ºâ”‚  ğŸ™ï¸ ğŸ¢     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  ğŸ¡      â”‚        â”‚
â”‚  â”‚ Med pop  â”‚        â”‚  High pop   â”‚         â”‚  High pop â”‚        â”‚
â”‚  â”‚ Low traf â”‚        â”‚  High traf  â”‚         â”‚  Med traf â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                     â”‚
â”‚                             â–¼                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                    â”‚   AMENITIES     â”‚                           â”‚
â”‚                    â”‚ ğŸ¥ ğŸŒ³ ğŸ« ğŸ›’    â”‚                           â”‚
â”‚                    â”‚ Hospitals, Parksâ”‚                           â”‚
â”‚                    â”‚ Schools, Malls  â”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Metro Network

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    METRO LINES                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  ğŸ”´ RED LINE (East-West)                                         â”‚
â”‚     â—â”â”â”â”â—â”â”â”â”â—â”â”â”â”â—â”â”â”â”â—â”â”â”â”â—â”â”â”â”â—â”â”â”â”â—                        â”‚
â”‚     8 stations, horizontal route                                 â”‚
â”‚                                                                   â”‚
â”‚  ğŸ”µ BLUE LINE (North-South)                                      â”‚
â”‚           â—                                                       â”‚
â”‚           â”ƒ                                                       â”‚
â”‚           â—                                                       â”‚
â”‚           â”ƒ                                                       â”‚
â”‚           â—â”â”â”â” INTERCHANGE â”â”â”â”â—                                â”‚
â”‚           â”ƒ                                                       â”‚
â”‚           â—                                                       â”‚
â”‚           â”ƒ                                                       â”‚
â”‚           â—                                                       â”‚
â”‚     8 stations, vertical route                                   â”‚
â”‚                                                                   â”‚
â”‚  ğŸŸ¢ GREEN LINE (Diagonal)                                        â”‚
â”‚     â—                                                             â”‚
â”‚       â•²                                                           â”‚
â”‚         â—                                                         â”‚
â”‚           â•²                                                       â”‚
â”‚             â—â”â”â”â” INTERCHANGE                                    â”‚
â”‚               â•²                                                   â”‚
â”‚                 â—                                                 â”‚
â”‚                   â•²                                               â”‚
â”‚                     â—                                             â”‚
â”‚     8 stations, diagonal route                                   â”‚
â”‚                                                                   â”‚
â”‚  METRO ADVANTAGES:                                               â”‚
â”‚  â€¢ Speed: 80 km/h (vs 40 km/h roads)                            â”‚
â”‚  â€¢ Capacity: 5Ã— passenger capacity                               â”‚
â”‚  â€¢ Congestion immune: Constant speed regardless of traffic       â”‚
â”‚  â€¢ Travel time savings: 6-16% during rush hours                  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Traffic Statistics

### Congestion Level Interpretation

| Level | Congestion Factor | Color | Meaning |
|-------|-------------------|-------|---------|
| Very Low | 0-20th percentile | Dark Green | Free flow |
| Low | 20-40th percentile | Light Green | Light traffic |
| Medium | 40-60th percentile | Yellow | Moderate traffic |
| High | 60-80th percentile | Orange | Heavy traffic |
| Very High | 80-100th percentile | Dark Red | Severe congestion |
| Blocked | N/A | Pink (dashed) | Road closed |

### Statistics Panel

| Metric | Description |
|--------|-------------|
| Mean Congestion | Average congestion across all edges |
| Max Congestion | Highest congestion value in network |
| Road Avg | Average congestion for road edges only |
| Metro Avg | Average congestion for metro edges (usually low) |

---

## ğŸš€ Quick Start

```powershell
# Navigate to project
cd F:\SEM3\EDI\GNN---DIGITAL_CITY_SIMULATION

# Activate virtual environment
.\nv\Scripts\Activate.ps1

# Start the server
python backend\app.py

# Open in browser
# http://localhost:5000
```

---

## ğŸ“ File Structure

```
GNN---DIGITAL_CITY_SIMULATION/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ app.py              # Flask REST API server
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html          # Main HTML page
â”‚   â”œâ”€â”€ style.css           # Styles (dark/light themes)
â”‚   â”œâ”€â”€ app.js              # Frontend JavaScript
â”‚   â”œâ”€â”€ analysis.html       # Analysis page
â”‚   â”œâ”€â”€ analysis.css        # Analysis styles
â”‚   â””â”€â”€ analysis.js         # Analysis logic
â”œâ”€â”€ gnn_model.py            # GATv2 model architecture
â”œâ”€â”€ train_model.py          # Training script
â”œâ”€â”€ trained_gnn.pt          # Trained model weights
â”œâ”€â”€ city_graph.graphml      # City graph data
â”œâ”€â”€ macroscopic_traffic_simulation.py  # Traffic simulation
â”œâ”€â”€ whatif_system.py        # What-if analysis
â”œâ”€â”€ requirements.txt        # Python dependencies
â”œâ”€â”€ README.md               # Project overview
â””â”€â”€ FEATURES.md             # This file
```

---

*Last Updated: December 2025*
*Digital Twin City Simulation Team*
